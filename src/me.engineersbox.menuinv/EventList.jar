package me.engineersbox.menuinv;

import java.util.ArrayList;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.inventory.InventoryClickEvent;
import org.bukkit.inventory.Inventory;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.ItemMeta;

import net.md_5.bungee.api.ChatColor;

public class EventList implements Listener {

	public final static Inventory desert = Bukkit.createInventory(null, 9 * 5, ChatColor.DARK_PURPLE + "[BlockPalette] " + ChatColor.GOLD + "Desert");

	static {
		
		ItemStack exit = new ItemStack(Material.BEDROCK);
        ItemMeta im0 = exit.getItemMeta();
        im0.setDisplayName(ChatColor.GRAY + "EXIT");
        exit.setItemMeta(im0);
        
        ItemStack sand_layer = new ItemStack(Material.SNOW_BLOCK);
        ItemMeta im = sand_layer.getItemMeta();
        im.setDisplayName(ChatColor.GOLD + "SAND LAYER");
        ArrayList<String> Lore = new ArrayList<String>();
        Lore.add(ChatColor.YELLOW + "Base Block:");
        Lore.add(ChatColor.YELLOW + "snow_layer");
        im.setLore(Lore);
        sand_layer.setItemMeta(im);
		
        desert.setItem(0, sand_layer);
        desert.setItem(44, exit);
	}
	 
    @EventHandler
    public void onPlayerClickGUI(InventoryClickEvent e) {
        Player p = (Player) e.getWhoClicked();
        //ItemStack item = e.getCurrentItem();
        int slot = e.getRawSlot();
        
        if ((e.getCurrentItem().getType() == Material.BEDROCK) && (e.getCurrentItem().getItemMeta().getDisplayName().equals(ChatColor.GRAY + "EXIT"))) {
        	p.closeInventory();
        }
        
        
        if (e.getInventory().getTitle().equals(ChatColor.DARK_PURPLE + "[BlockPalette]")) {
            if (e.getSlot() == -999) {
                return;
            }

            if (slot >= 0 && slot < 9) {
                e.setCancelled(true);
                //p.sendMessage("Event Cancelled!"); //debug
            }
            
            if ((e.getCurrentItem().getType() == Material.SAND) && (e.getCurrentItem().getItemMeta().getDisplayName().equals(ChatColor.GOLD + "DESERT"))) {
            	p.openInventory(desert);
            }
        }
        
        if (e.getInventory().getTitle().equals(ChatColor.DARK_PURPLE + "[BlockPalette] " + ChatColor.GOLD + "Desert")) {
            if (e.getSlot() == -999) {
                return;
            }

            if (slot >= 0 && slot < 9 * 5) {
                e.setCancelled(true);
                //p.sendMessage("Event Cancelled!"); //debug
            }
        
        }
 
    }

}
